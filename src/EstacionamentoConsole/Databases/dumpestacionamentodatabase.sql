DROP TABLE IF EXISTS Clientes;
DROP TABLE IF EXISTS Veiculos;
DROP TABLE IF EXISTS Tickets;
DROP TABLE IF EXISTS Movimentacoes;
Commit;

CREATE TABLE IF NOT EXISTS Clientes (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    NomeCompleto TEXT NOT NULL,
    Cpf TEXT NOT NULL,
    NumeroCelular TEXT NOT NULL,
    DataCadastro DATETIME DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS Veiculos (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Placa TEXT NOT NULL,
    Cor TEXT NOT NULL,
    Fabricante TEXT NOT NULL,
    Modelo TEXT NOT NULL,
    DataCadastro TEXT NOT NULL,
    IdCliente INTEGER NOT NULL,
	FOREIGN KEY (IdCliente) REFERENCES Clientes (Id)
);
CREATE TABLE IF NOT EXISTS Tickets (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    Ativo INTEGER NOT NULL DEFAULT 0,
    ValorPorMinuto DOUBLE NOT NULL DEFAULT 0,
    Entrada DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    Saida DATETIME,
    IdCliente INTEGER NOT NULL,
    IdVeiculo INTEGER,
    FOREIGN KEY (IdCliente) REFERENCES Clientes (Id),
    FOREIGN KEY (IdVeiculo) REFERENCES Veiculos (Id)
);
CREATE TABLE IF NOT EXISTS Movimentacoes (
    Id INTEGER PRIMARY KEY AUTOINCREMENT,
    ValorPorMinuto TEXT NOT NULL,
    TotalVagasDisponiveis TEXT NOT NULL,
    TotalVeiculosEstacionados TEXT NOT NULL,
    TemVagaDisponivel INTEGER NOT NULL,
    DataCadastro DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
);
Commit;